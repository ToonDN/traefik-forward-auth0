Diagrams
========

Component diagram
-----------------

.. figure:: /_static/component.png
   :alt: Component diagram

   UML component diagram

Sequence diagram
----------------

.. figure:: /_static/sequence.png
   :alt: Sequence diagram

   UML sequence diagram

Authorization activity diagram
------------------------------

.. uml::

    digraph G {
     VALIDATING_ID_TOKEN -> ACCESS_GRANTED;
     VALIDATING_ID_TOKEN -> INVALID_TOKEN;
     VALIDATING_TOKENS -> VALIDATING_ACCESS_TOKEN;
     AUTHORIZING -> ERROR;
     AUTHORIZING -> VALIDATING_REQUESTED_URL;
     VALIDATING_ACCESS_TOKEN -> INVALID_TOKEN;
     VALIDATING_ACCESS_TOKEN -> VALIDATING_SAME_SUBS;
     AWAIT_AUTHORIZING -> AUTHORIZING;
     VALIDATING_SAME_SUBS -> VALIDATING_PERMISSIONS;
     VALIDATING_SAME_SUBS -> INVALID_TOKEN;
     VALIDATING_REQUESTED_URL -> VALIDATING_WHITELISTED_URL;
     VALIDATING_WHITELISTED_URL -> ACCESS_GRANTED;
     VALIDATING_WHITELISTED_URL -> VALIDATING_RESTRICTED_METHOD;
     VALIDATING_RESTRICTED_METHOD -> ACCESS_GRANTED;
     VALIDATING_RESTRICTED_METHOD -> VALIDATING_TOKENS;
     VALIDATING_PERMISSIONS -> VALIDATING_ID_TOKEN;
     VALIDATING_PERMISSIONS -> ACCESS_DENIED;
     INVALID_TOKEN -> NEED_REDIRECT;
     INVALID_TOKEN -> ACCESS_DENIED;
    }

Authentication activity diagram
-------------------------------

.. uml::

    digraph G {
    AUTHENTICATING -> VALIDATING_TOKENS;
     VALIDATING_ID_TOKEN -> INVALID_TOKEN;
     VALIDATING_ID_TOKEN -> VALIDATING_SAME_SUBS;
     VALID_TOKENS -> AUTHENTICATED;
     INVALID_TOKEN -> ANONYMOUS;
     VALIDATING_ACCESS_TOKEN -> VALIDATING_ID_TOKEN;
     VALIDATING_ACCESS_TOKEN -> INVALID_TOKEN;
     VALIDATING_SAME_SUBS -> INVALID_TOKEN;
     VALIDATING_SAME_SUBS -> VALID_TOKENS;
     AWAIT_AUTHENTICATION -> AUTHENTICATING;
     VALIDATING_TOKENS -> VALIDATING_ACCESS_TOKEN;
    }
